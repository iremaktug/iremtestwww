<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- IMG Tag Pixel Integration -->
    <img src="https://www.facebook.com/tr?id=409517402905755&ev=PageView&noscript=1" />
    <title>Facebook Pixel Add to Cart with Form</title>
    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '409517402905755', {
            autoConfig: true,
            em: true, 
            fn: true,
            ln: true, 
            country: true
            // Enables automatic advanced matching for email, phone, and other fields
        }); 
        fbq('track', 'PageView');
    </script>
    <noscript>
        <img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=409517402905755&ev=PageView&noscript=1"/>
    </noscript>
</head>
<body>
    <h1>Facebook Pixel Add to Cart Test</h1>

    <!-- Form to collect Name and Email -->
    <form id="userDetailsForm">
        <label for="fname">First Name:</label>
        <input type="text" id="fname" name="fname" placeholder="Enter your first name" required><br><br>

         <label for="lname">Last Name:</label>
        <input type="text" id="lname" name="lname" placeholder="Enter your last name" required><br><br>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your email" required><br><br>

        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required><br><br>

         <label for="country">country:</label>
        <input type="text" id="country" name="country" placeholder="Enter your country" required><br><br>

        <button type="button" id="addToCartButton">Add to Cart</button>

        <button type="button" id="addToWishlistButton">Add to Wishlist</button>

         <button type="button" id="purchaseButton">Purchase</button>
    </form>

    <!-- JavaScript to trigger the addToCart event -->
    <script>
        document.getElementById('addToCartButton').addEventListener('click', function() {
            // Get the values from the form
            const fname = document.getElementById('fname').value;
            const lname = document.getElementById('lname').value;
            const email = document.getElementById('email').value;

            if (!fname || !lname) {
                alert('Please enter both your names.');
                return;
            }

            // Trigger Facebook Pixel AddToCart event with user data
            fbq('track', 'AddToCart', {
                content_name: 'Test Product',
                content_category: 'Example Category',
                content_ids: ['1234'],
                content_type: 'product',
                value: 50.00,
                currency: 'USD'

            });
        });

          document.getElementById('purchaseButton').addEventListener('click', function() {
            // Get the values from the form
            const fname = document.getElementById('fname').value;
            const lname = document.getElementById('lname').value;
            const email = document.getElementById('email').value;
            const ccode = document.getElementById('country').value;

            if (!fname || !lname) {
                alert('Please enter both your names.');
                return;
            }


              fbq('track', 'Purchase', {currency: "USD", value: 30.00});

              
            // Trigger Facebook Pixel AddToCart event with user data
            fbq('track', 'Purchase', {
                content_name: 'Test Product',
                content_category: 'Example Category',
                content_ids: ['1234'],
                content_type: 'product',
                value: 50.00,
                currency: 'USD',
                fn: fname,    
                ln: lname, 
                em: email,
                country: ccode
                
            });
        });
    </script>
</body>
</html>
